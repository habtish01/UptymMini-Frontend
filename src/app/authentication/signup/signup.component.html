<div class="limiter">
  <div class="container-login100">
    <div class="wrap-login100">
      <form class="login100-form validate-form m-auto px-4">
        <!-- .w-680 -->

        <span class="login100-form-title p-b-20"> Create Account </span>
        <form *ngIf="!submitted" [formGroup]="firstFormGroup">
          <ng-template matStepLabel>Fill out your info</ng-template>
          <!-- <div class="row" style="margin-top: 75px">
            <div class="m-auto">
              <input (change)="previewImage($event, imageTag)" type="file" style="display: none" #file
                name="profile_avatar" accept="image/*" />
              <div class="user-image">
                <img #imageTag (click)="file.click()" [src]="'assets/images/user/usrbig3.jpg'" class="user-img" />
                <mat-icon (click)="file.click()" size="20px">edit</mat-icon>
                <mat-icon (click)="removeImg(imageTag, file)" size="20px">delete</mat-icon>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
              <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>First Name</mat-label>
                <input matInput formControlName="firstName" />
                <mat-icon matSuffix>face</mat-icon>
                <mat-error *ngIf="firstFormGroup.get('firstName').hasError('required')">
                  First Name is required
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
              <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>Last Name</mat-label>
                <mat-icon matSuffix>face</mat-icon>
                <input matInput formControlName="lastName" />
                <mat-error *ngIf="firstFormGroup.get('lastName').hasError('required')">
                  Last Name is required
                </mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
              <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>Telephone</mat-label>
                <input matInput formControlName="phoneNumber" />
                <mat-icon matSuffix>phone</mat-icon>
                <mat-error *ngIf="firstFormGroup.get('phoneNumber').hasError('required')">
                  Telephone is required
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
              <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>Customer Type</mat-label>
                <mat-select formControlName="customerTypeId">
                  <mat-option *ngFor="let option of customerTypes" [value]="option.id">
                    {{ option.name | humanize }}</mat-option>
                </mat-select>
                <mat-error *ngIf="firstFormGroup.get('customerTypeId').hasError('required')">
                  Customer Type is required
                </mat-error>
              </mat-form-field>
            </div>
          </div> -->
          <div class="row">
            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
              <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>Email</mat-label>
                <input matInput formControlName="email" />
                <mat-icon matSuffix>email</mat-icon>
                <mat-error *ngIf="firstFormGroup.get('email').hasError('required')">
                  Email is required
                </mat-error>
                <mat-error *ngIf="firstFormGroup.get('email').hasError('email')">
                  Please enter a valid email address
                </mat-error>
              </mat-form-field>
            </div>

            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
              <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>Password</mat-label>
                <input matInput formControlName="password" [type]="hide ? 'password' : 'text'" />
                <mat-icon matSuffix (click)="hide = !hide">
                  {{ hide ? "visibility_off" : "visibility" }}</mat-icon>
                <mat-error *ngIf="firstFormGroup.get('password').hasError('required')">
                  Password is required
                </mat-error>
              </mat-form-field>
            </div>
            <!-- <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                  <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Address</mat-label>
                    <input matInput formControlName="address" />
                    <mat-error *ngIf="firstFormGroup.get('address').hasError('required')">
                      Address is required
                    </mat-error>
                  </mat-form-field>
                </div> -->
          </div>
          <!-- <div class="row">
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                  <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Experience</mat-label>
                    <textarea matInput formControlName="experience"></textarea>
                  </mat-form-field>
                </div>
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                  <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Work History</mat-label>
                    <textarea matInput formControlName="workHistory"></textarea>
                  </mat-form-field>
                </div>
              </div> -->
          <div>
            <button mat-flat-button color="primary" [disabled]="firstFormGroup.invalid || loading"
              class="mt-4 login100-form-btn" (click)="register()">
              Register
              <mat-icon class="ml-2" *ngIf="loading">
                <mat-spinner color="accent" diameter="20"></mat-spinner>
              </mat-icon>
            </button>

          </div>
        </form>
        <!-- <mat-step [stepControl]="secondFormGroup">
            <form class="px-4" [formGroup]="secondFormGroup">
              <ng-template matStepLabel>Subscription Level</ng-template>
              <div class="row subscription my-3">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
                  <div class="row">
                    <div class="col-md-3 col-sm-6" *ngFor="let item of planPermission; let i=index">
                      <div *ngIf="i<4" class="pricingTable {{item.color}}"
                        [class.selected]="item.planId===secondFormGroup.get('subscribedPlan').value">
                        <div>
                          <div class="pricingTable-header">
                            <i class="material-icons">{{item.icon}}</i>
                            <div class="price-value" *ngIf="item.planPrice">
                              ${{item.planPrice}}
                              <span class="month">per month</span>
                            </div>
                            <div class="price-value" *ngIf="!item.planPrice">
                              Free
                              <span class="month">plan</span>
                            </div>
                          </div>
                          <h3 class="heading">{{item.planName}}</h3>
                          <div class="pricing-content">
                            <ul>
                              <li *ngFor="let subItem of item.subPermissions">
                                <div *ngIf="subItem.limitDays">
                                  <b>{{subItem.limitDays}}Days</b> {{subItem.permissionName}}
                                </div>
                                <div *ngIf="subItem.limitJobs">
                                  <b>{{subItem.limitJobs}}Days</b> {{subItem.permissionName}}
                                </div>
                                <div *ngIf="!subItem.limitJobs && !subItem.limitDays">
                                  {{subItem.permissionName}}
                                </div>
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="pricingTable-signup">
                          <button *ngIf="item.planPrice" class="mb-1" (click)="changePlan(stepper, item.planId, true)">
                            {{configurationDto.trialPeriodDays}}days Trial</button>
                          <button class="mb-1" (click)="changePlan(stepper, item.planId, false)">Subscribe</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
          </mat-step>
          <mat-step>
            <ng-template matStepLabel>Select Payment</ng-template>
            <div class="row payment">
              <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-2">
                <label>Choose a Payment Method</label>
                <div class="row payment-type justify-content-center mt-4">
                  <div class="card text-center" *ngFor="let item of payments"
                    (click)="paymentMethod=item.paymentTypeName" [class.selected]="paymentMethod==item.paymentTypeName">
                    <div class="card-image">
                      <mat-icon>{{item.icon}}</mat-icon>
                    </div>
                    <div class="card-content">
                      {{item.paymentTypeName}}
                    </div>
                    <div class="align-items-center justify-content-center check-wrapper">
                      <div class="check"></div>
                    </div>
                  </div>
                </div>
                <div *ngIf="paymentMethod=='Credit Card';else directPayment" class="row payment-detail mt-4">
                  <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width" appearance="outline">
                      <mat-label>CARD NUMBER</mat-label>
                      <input matInput />
                      <mat-icon matSuffix></mat-icon>
                    </mat-form-field>
                  </div>
                  <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width" appearance="outline">
                      <mat-label>EXPIRATION DATE</mat-label>
                      <mat-icon matSuffix>calendar_today</mat-icon>
                      <input matInput />
                    </mat-form-field>
                  </div>
                  <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width" appearance="outline">
                      <mat-label>CARD HOLDER NAME</mat-label>
                      <mat-icon matSuffix>face</mat-icon>
                      <input matInput />
                    </mat-form-field>
                  </div>
                  <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width" appearance="outline">
                      <mat-label>CVV</mat-label>
                      <mat-icon matSuffix>payments</mat-icon>
                      <input matInput />
                    </mat-form-field>
                  </div>
                </div>
                <ng-template #directPayment>
                  <div class="row justify-content-center mt-4">
                    <h3>Detail information will be sent via Email</h3>
                  </div>
                </ng-template>
              </div>
            </div>
            <div>
              <button mat-raised-button matStepperPrevious color="warn" class="mr-2">
                Back
              </button>
              <button mat-raised-button (click)="selectPayment(stepper)" color="primary">
                Next
              </button>
            </div>
          </mat-step> 
        <mat-step>
          <ng-template matStepLabel>Confirm & Submit</ng-template>
          <div class="text-center" style="margin: 0 auto">
            <h4>If you are ready, press the register button below</h4>
            <mat-icon style="color: green; font-size: 75px; width: 75px; height: 75px">done</mat-icon><br />
            <button mat-flat-button color="primary"
              [disabled]="firstFormGroup.invalid  || secondFormGroup.invalid || loading" class="mt-4 login100-form-btn"
              (click)="register()">
              Register
              <mat-icon class="ml-2" *ngIf="loading">
                <mat-spinner color="accent" diameter="20"></mat-spinner>
              </mat-icon>
            </button>
          </div>
          <div class="mt-4">
            <button mat-raised-button matStepperPrevious color="warn" class="mr-2">
              Back
            </button>
          </div>
        </mat-step>-->

        <div *ngIf="submitted">
          <i class="material-icons text-success" style="
              text-align: center;
              display: block;
              font-size: 60px;
              margin-bottom: 10px;
            ">email</i>
          <h4 *ngIf="isEmailVerified">
            Email verification was sent to you right now, Please check your
            inbox to verify your email to be able to sign in.
          </h4>
          <h4 *ngIf="!isEmailVerified">
            You are registered successfully.
          </h4>
        </div>

        <div class="flex-sb-m w-full p-t-15 p-b-20">
          <div>
            <span>Already Registered?
              <a routerLink="/authentication/signin"> Login </a></span>
          </div>
        </div>

      </form>
      <!-- <div class="login100-more" style="background-image: url('assets/images/pages/bg-02.png');">
      </div> -->
    </div>
  </div>
</div>